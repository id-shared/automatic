  // Open shared memory
  HANDLE shm_handle = OpenFileMapping(FILE_MAP_READ, FALSE, SHM_NAME);
  if (shm_handle == NULL) {
    std::cerr << "Could not open shared memory: " << GetLastError() << std::endl;
    return 1;
  }

  void* ptr = MapViewOfFile(shm_handle, FILE_MAP_READ, 0, 0, SHM_SIZE);
  if (ptr == NULL) {
    std::cerr << "Could not map view of file: " << GetLastError() << std::endl;
    CloseHandle(shm_handle);
    return 1;
  }

  // Open semaphore
  HANDLE sem_handle = OpenSemaphore(SEMAPHORE_ALL_ACCESS, FALSE, SEM_NAME);
  if (sem_handle == NULL) {
    std::cerr << "Could not open semaphore: " << GetLastError() << std::endl;
    UnmapViewOfFile(ptr);
    CloseHandle(shm_handle);
    return 1;
  }
